{% extends "layout_terapeuta.html" %}

{% block title %}Gestión de Pacientes{% endblock %}

{% block content %}

<script src="https://cdn.jsdelivr.net/npm/@turf/turf@6/turf.min.js"></script>

    <div class="container">
       
        <div class="page-header">
            <h2>Gestión de Pacientes</h2>
            <p>Administra la información de tus pacientes y su historial clínico</p>
        </div>

        <div class="actions-bar">
            <div class="search-box">
                <span class="search-icon">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="11" cy="11" r="8"></circle>
                        <path d="m21 21-4.35-4.35"></path>
                    </svg>
                </span>
                <input type="text" placeholder="Buscar paciente por nombre, email o teléfono..." id="searchInput">
            </div>
            <button class="btn-add" onclick="openAddPatientModal()">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="12" y1="5" x2="12" y2="19"></line>
                    <line x1="5" y1="12" x2="19" y2="12"></line>
                </svg>
                Agregar Paciente
            </button>
        </div>

       
        <div class="patients-grid" id="patientsGrid">
            
            
            </div>
        </div>
  

   

        <!-- Modal de confirmación -->
        <div id="successModal" class="modal">
            <div class="modal-content">
                <span class="close">&times;</span>
                <div class="modal-icon">✅</div>
                <h2></h2>
                <p></p>
            </div>
        </div>
    
    
  
         <div class="modal-uss" id="addPatientModal">
  <div class="modal-content-uss">
    <div class="modal-header">
      <h3>Crear Cuenta</h3>
      <button class="btn-close" onclick="closeAddPatientModal()">×</button>
    </div>

    <div class="modal-body">
      <form id="addPatientForm">
        <div class="form-row">
          <div class="form-group">
            <label>Identificación</label>
            <input type="text" id="identification" required maxlength="25">
          </div>
          <div class="form-group">
            <label>Nombre</label>
            <input type="text" id="nombre" required>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label>Primer Apellido</label>
            <input type="text" id="apellido1" required>
          </div>
          <div class="form-group">
            <label>Segundo Apellido</label>
            <input type="text" id="apellido2" required>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label>Teléfono</label>
            <input type="tel" id="telefono"  required maxlength="8" minlength="8">
          </div>
          <div class="form-group">
            <label>Fecha de Nacimiento</label>
            <input type="date" id="fechaNacimiento" required>
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label>Pais</label>
            <select id="pais" required>
            </select>
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label>Provincia</label>
            <select id="provincia" required>
            </select>
          </div>
          <div class="form-group">
            <label>Cantón</label>
            <select id="canton" required>
              
            </select>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label>Distrito</label>
            <select id="distrito" required>
              
            </select>
          </div>
          <div class="form-group">
            <label>Dirección Exacta</label>
            <input type="text" id="direccion" required>
          </div>
        </div>
       <div class="form-row">
          <div class="form-group">
            <label>Correo Electronico</label>
            <input type="email" id="correo" required>
          </div>
        <div class="form-group">
          <label>Ocupacion</label>
          <input type="text" id="ocupacion" required>
        </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label>Edad</label>
            <input type="number" id="edad" required>
          </div>
        <div class="form-group">
          <label>Lugar de Trabajo / Estudio</label>
          <input type="text" id="lugarTrabajo" required>
        </div>
        </div>
        <div class="modal-footer">
      <button type="button" class="btn-submit" onclick="submitPatient()">Crear Cuenta</button>

    </div>
  </div>
      </form>
    </div>
</div>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
    const PATIENTS_URL="{{ url_for('pacientes.VerPacientes') }}"
    const PAIS_URL="{{ url_for('geolocalizacion.GetPais') }}"
    const PROVINCIA_URL="{{ url_for('geolocalizacion.GetEstado') }}"
    const CIUDAD_URL="{{ url_for('geolocalizacion.GetCiudad') }}"
    const BARRIO_URL="{{ url_for('geolocalizacion.GetBarrio') }}"
</script>
<script src="{{ url_for('static', filename='js/gestionPacientes.js') }}"></script>

  {% endblock %}