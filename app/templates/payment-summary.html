{% extends "layout.html" %}

{% block title %}Pago{% endblock %}

{% block content %}
    <main class="main-content">  
        <div class="progress-section">
            <div class="progress-title">Agendar cita</div>
            <div class="progress-steps">
                <div class="step completed">1</div>
                <div class="step-arrow">‚Üí</div>
                <div class="step completed">2</div>
                <div class="step-arrow">‚Üí</div>
                <div class="step active">3</div>
            </div>
        </div>

        <div class="main">
            <button class="back-button" onclick="window.history.back()">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                <path d="M10 12L6 8L10 4" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                </svg>
                Volver
            </button>
            <div class="section-title">Resumen de tu cita</div>

            <div class="summary-card">
                <div class="summary-header" id="service-summary-text"></div>
                <div class="summary-row">
                    <span class="summary-label">Fecha</span>
                    <span class="summary-value" id="summary-date">No seleccionada</span>
                </div>
                <div class="summary-row">
                    <span class="summary-label">Hora</span>
                    <span class="summary-value" id="summary-time">No seleccionada</span>
                </div>
                <div class="summary-row">
                    <span class="summary-label">Total</span>
                    <span class="summary-value" id="summary-price">‚Ç°0</span>
                </div>
                <div class="summary-row" id="usd-equivalent" style="display: none;">
                    <span class="summary-label">Equivalente USD</span>
                    <span class="summary-value" id="summary-usd">$0.00</span>
                </div>
            </div>

            <div class="payment-section">
                <div class="payment-title">M√©todo de pago</div>
                
                <div class="payment-option selected" onclick="selectPayment(this)">
                    <div class="payment-icon">üí≥</div>
                    <div class="payment-text">Tarjeta de cr√©dito o d√©bito</div>
                </div>

                <div class="payment-option" onclick="selectPayment(this)">
                    <div class="payment-icon">üè¶</div>
                    <div class="payment-text">Transferencia bancaria</div>
                </div>

                <div class="payment-option" onclick="selectPayment(this)">
                    <div class="payment-icon">üì±</div>
                    <div class="payment-text">SINPE m√≥vil</div>
                </div>

                <!-- Seccion de PayPal -->
                <div class="almarte-paypal-section">
                    <div class="almarte-paypal-title">Pagar con PayPal</div>
                    
                    <div class="almarte-paypal-button-container">
                        <div id="almarte-paypal-button-container"></div>
                    </div>

                    <div class="almarte-paypal-info">
                        <div class="almarte-paypal-info-title"></div>
                        <p class="almarte-paypal-info-text"></p>
                        <p class="almarte-paypal-info-text" id="paypal-exchange-rate"></p>
                    </div>
                </div>

                <div class="payment-option" onclick="selectPayment(this)">
                    <div class="payment-icon">üíµ</div>
                    <div class="payment-text">Efectivo el d√≠a de la cita</div>
                </div>
            </div>

            <button class="continue-btn" 
                data-url="{{ url_for('routes.payment') }}" 
                onclick="continueToPaymentForm(this)">
                 Continuar
            </button>
        </div>
    </main>
   <script>
    const dashboardUrl = "{{ url_for('routes.dashboard_Consultante') }}";
    const paymentforUrl = "{{ url_for('routes.payment') }}";
    const CITA_URL ="{{ url_for('Citas.CrearCita') }}"
    const usuario = "{{ session.get('idusuario') }}";
    const TC_URL="{{ url_for('tpc.ConsultarTipoCambio') }}";
</script>
   </script>
    <!-- PayPal SDK -->
    <script src="https://www.paypal.com/sdk/js?client-id=AZfjbKTM0Mrs69k-q1LtCyqsd36OFn8temhI756Rw5tW6QecVtrGHN5NBABwIGyvrQyu-wiYyoQiG2M3&currency=USD"></script>
    
    <script src="{{ url_for('static', filename='js/payment-summary.js') }}"></script>
    
 
{% endblock %}