<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Restablecer Contrase√±a - Conexion</title>
     <link rel="stylesheet" href="{{ url_for('static', filename='css/restablcerContraStyle.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/popupStyle.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/modal.css') }}">
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
</head>
<body>
    
    <div class="container">

        <div class="logo">
            <div class="logo-text">Conexion</div>
            <div class="logo-subtitle">Almarte</div>
        </div>

        <!-- Estado de restablecimiento -->
        <div class="reset-state" id="resetState">
            <div class="icon-container">
                <div class="icon">üîë</div>
            </div>

            <h1 class="title">Nueva Contrase√±a</h1>
            <p class="subtitle">Crea una contrase√±a segura para tu cuenta</p>

            <div class="token-status token-valid" id="tokenStatus">
                ‚úÖ Puedes restablecer tu contrase√±a
            </div>
<!-- Modal de confirmaci√≥n -->
<div id="successModal" class="modal">
    <div class="modal-content">
        <span class="close">&times;</span>
        <div class="modal-icon">‚úÖ</div>
        <h2>¬°Contrase√±a actualizada!</h2>
        <p>Tu contrase√±a se ha cambiado correctamente. Ser√°s redirigido al inicio de sesi√≥n.</p>
    </div>
</div>

            <form id="resetForm">
                <!-- Campo: Nueva contrase√±a -->
                <div class="form-group" style="position: relative;">
                    <label class="form-label" for="newPassword">Nueva contrase√±a</label>
                    <input type="password"
                        id="newPassword"
                        name="newPassword"
                        class="form-input"
                        placeholder="Ingresa tu nueva contrase√±a"
                        required>
                    <i id="toggleNewPassword" class="fa-solid fa-eye"
                    style="position: absolute; right: 10px; top: 68%; transform: translateY(-50%); cursor: pointer; color: #555;"></i>

                    <div class="password-strength" id="passwordStrength">
                        <div class="password-strength-bar" id="passwordStrengthBar"></div>
                    </div>
                    <div class="strength-text" id="strengthText"></div>
                    <div class="error-message" id="passwordError"></div>
                    <div class="success-message" id="passwordSuccess"></div>
                </div>

<!-- Campo: Confirmar contrase√±a -->
           <div class="form-group" style="position: relative;">
                <label class="form-label" for="confirmPassword">Confirmar contrase√±a</label>
                <input type="password"
                    id="confirmPassword"
                    class="form-input"
                    placeholder="Confirma tu nueva contrase√±a"
                    required>
                <i id="toggleConfirmPassword" class="fa-solid fa-eye"
                style="position: absolute; right: 10px; top: 68%; transform: translateY(-50%); cursor: pointer; color: #555;"></i>

                <div class="error-message" id="confirmError"></div>
                <div class="success-message" id="confirmSuccess"></div>
            </div>


                <div class="requirements">
                    <div class="requirements-title">Requisitos de contrase√±a:</div>
                    <div class="requirement" id="req-length">
                        <div class="requirement-icon requirement-pending">‚úó</div>
                        <span>M√≠nimo 8 caracteres</span>
                    </div>
                    <div class="requirement" id="req-uppercase">
                        <div class="requirement-icon requirement-pending">‚úó</div>
                        <span>Al menos una may√∫scula</span>
                    </div>
                    <div class="requirement" id="req-lowercase">
                        <div class="requirement-icon requirement-pending">‚úó</div>
                        <span>Al menos una min√∫scula</span>
                    </div>
                    <div class="requirement" id="req-number">
                        <div class="requirement-icon requirement-pending">‚úó</div>
                        <span>Al menos un n√∫mero</span>
                    </div>
                    <div class="requirement" id="req-special">
                        <div class="requirement-icon requirement-pending">‚úó</div>
                        <span>Al menos un car√°cter especial</span>
                    </div>
                </div>

                <button type="submit" class="primary-btn" id="resetBtn" disabled>
                    Restablecer Contrase√±a
                </button>
            </form>

           <a href="{{ url_for('auth.login') }}" class="secondary-btn">
                 <span class="btn-icon">‚Üê</span>
                 <span>Volver al inicio de sesi√≥n</span>
            </a>
        </div>

            
        </div>
    </div>
     <script>
        const REDIREC_UTL="{{ url_for('auth.login') }}"
    const NewPass_URL = "{{ url_for('crede.UpdatePassword') }}";
   </script>
    <script src="{{ url_for('static', filename='js/restablecer.js') }}" > </script>
    <script src="{{ url_for('static', filename='js/modal.js') }}" > </script>
</body>
</html>